package cata_frutas;
import java.util.*;
import java.math.*;

class Ponto {
	public int x;
	public int y;
	
	public Ponto(int x, int y) {
		this.x = x;
		this.y = y;
		}
	
	public void setX(int x) {
		this.x = x;
	}
	
	public void setY(int y) {
		this.y = y;
	}
	
	public int getX() {
		return this.x;
	}
	
	public int getY() {
		return this.y;
	}
}

class Elemento {
	Ponto posicao;
	int Dimensao;
	
	public Elemento(int x, int y, int dimensao) {
		this.posicao = new Ponto(x,y);
		this.Dimensao = dimensao;
	}
	
	public void setPosicao(int x, int y) {
		this.posicao.setX(x);
		this.posicao.setY(y);
	}
	
	public Ponto getPosicao() {
		return this.posicao;
	}
	
	public boolean verificaPosicao(int x) {
		boolean resp = true;
		if(x == this.Dimensao || x < 0) {
			resp = false;
		}
		return resp;
	}
	
}


class Jogador extends Elemento {
	public String nome;
	public int movimentos;
	public int movimentosRestantes;
	public int tamanhoMochila;
	public Mochila mochilaJogador;
	
	public Jogador(int x, int y, String nome,int tamanhoMochila, int dimensao) {
		super(x,y,dimensao);
		this.nome = nome;
		this.mochilaJogador = new Mochila(tamanhoMochila);
	}
	
	
	public void empurrar(Jogador pA, Jogador pB) {
		int forcaAtaque = pA.mochilaJogador.mochila.length;
		int forcaDefesa = pB.mochilaJogador.mochila.length;
		
		double log2Atq = Math.log10(forcaAtaque + 1) / Math.log10(2);
		double log2Def = Math.log10(forcaDefesa + 1) / Math.log(2);
		int empurrao = (int) Math.round(log2Atq - log2Def);
		
		System.out.println(empurrao);
		
	}
	
	public void saltar(Elemento objeto, int direcao) {
		int x = objeto.getPosicao().getX();
		int y = objeto.getPosicao().getY();
		
		this.movimentosRestantes--;
		if(objeto.verificaPosicao(x) && objeto.verificaPosicao(y)) {
			
			Elemento objetoPosPedra = null;
			
			switch(direcao) {
			case 1:
				objetoPosPedra.setPosicao(x - 1, y);
				break;
			case 2:
				objetoPosPedra.setPosicao(x + 1, y);
				break;
			case 3:
				objetoPosPedra.setPosicao(x, y + 1);
				break;
			case 4:
				objetoPosPedra.setPosicao(x, y - 1);
				break;
			}
			if(!(objetoPosPedra.verificaPosicao(x) && objetoPosPedra.verificaPosicao(y))) {
				System.out.println("Não é possível saltar por essa pedra. Ação inválida.");
				return;
			}
			
			else if(objetoPosPedra instanceof Jogador) {
				System.out.println("Um jogador ocupa a outra posição após a pedra. Ação Inválida.");
			}
			
			else if(objetoPosPedra instanceof Pedra) {
				saltar(objetoPosPedra, direcao);
			}
			else {
				System.out.println("Você saltou pela pedra.");
			}
			
		}
	}
	
	public void movimentar(int direcao, Elemento[][] Matriz) {
		//Verifica se o jogador ainda está dentro da matriz(é um movimento válido)
		int x = this.getPosicao().getX();
		int y = this.getPosicao().getY();
		
		Elemento jogador = Matriz[x][y];
		Elemento objeto = null;
		
		if(this.verificaPosicao(x) && this.verificaPosicao(y)) {
			
			
			//Seleção dos diferentes movimentos(vizinhaça-4)
			switch(direcao) {
			case 1:
				objeto = Matriz[x-1][y];
				this.setPosicao(x - 1, y);
				break;
			case 2:
				objeto = Matriz[x+1][y];
				this.setPosicao(x + 1, y);
				break;
			case 3:
				objeto = Matriz[x][y+1];
				this.setPosicao(x, y + 1);
				break;
			case 4:
				objeto = Matriz[x][y-1];
				this.setPosicao(x, y - 1);
				break;
			}
			
			if(objeto instanceof Jogador) {
				this.setPosicao(x, y);
				this.empurrar(this, (Jogador) objeto);
			}
			
			else if(objeto instanceof Fruta) {
				this.mochilaJogador.armazenaFruta( (Fruta) objeto);
			}
			
			else if(objeto instanceof Pedra) {
				saltar(objeto,direcao);
			}
			
		}
	}
	
	
	
}




class Mochila{
	public Fruta[] mochila;
	
	public Mochila(int tamanho) {
		this.mochila = new Fruta[tamanho];
	}
	
	public Fruta retornaFruta(int posicao) {
		Fruta retorno = null;
		if(posicao > 0 && posicao < this.mochila.length) {
			if(this.mochila[posicao] != null) {
				retorno = this.mochila[posicao];
				}
			else {
				System.out.printf("\nPosição %d inválida para o tamanho %d da mochila.", posicao, this.mochila.length);
			}
		}
		else {
			System.out.printf("\nPosição %d inválida para o tamanho %d da mochila.", posicao, this.mochila.length);
		}
		return retorno;
	}
	
	public void armazenaFruta(Fruta fruta) {
		if(this.mochilaCheia() != true) {
			for(int i = 0; i < this.mochila.length; i++) {
				if(this.mochila[i] == null) {
					this.mochila[i] = fruta;
					System.out.printf("Fruta %s armazenada com sucesso.");
					break;
				}
			}
		}
	}
	
	public boolean mochilaCheia() {
		boolean resp = false;
		for(int i = 0; i < this.mochila.length; i++) {
			if(this.mochila[i] == null) {
				resp = false;
				break;
			}
			else {
				resp = true;
			}
		}
		return resp;
	}
}


class Gramas extends Elemento {	
	public Gramas(int x, int y, int dimensao) {
		super(x,y,dimensao);
	}
}

class Pedra extends Elemento {
	public Pedra(int x, int y, int dimensao) {
		super(x,y,dimensao);
	}
}


class Arvore extends Elemento{
	Fruta tipofruta;
	int ultimaFruta;
	
	public Arvore(int x, int y, int dimensao, Fruta fruta) {
		super(x,y,dimensao);
		this.tipofruta = fruta;
		this.ultimaFruta = 0;
	}
	
	public Fruta getFruta() {
		Fruta fruta = null;
		if(ultimaFruta == 0) {
			int i = (int) Math.round(Math.random() * 10);
			int j = (int) Math.round(Math.random() * 10);
			int i2 = 0;
			int j2 = 0;
			if((i <= 10) && (i >= 7)) {
				i2 = 1;
			}
			if((i <= 6) && (i >= 4)) {
				i2 = 0;
			}
			if((i <= 3) && (i >= 1)){
				i2 = -1;
			}
			if((j <= 10) && (j >= 7)) {
				j2 = 1;
			}	
			if((j <= 6) && (j >= 4)) {
				j2 = 0;
			}
			if((j <= 3) && (j >= 1)){
				j2 = -1;
			}
			fruta = this.tipofruta;
			fruta.setPosicao(this.posicao.getX() + i2,this.posicao.getY() + j2);
		}
		else {
			fruta = null;
		}
		
		return fruta;
	}
}


abstract class Fruta extends Elemento{
	public float bichada;
	
	public Fruta(int x, int y, int dimensao, float bichada) {
		super(x,y,dimensao);
		this.bichada = bichada;
	}
	
	public abstract void efeito();
	
}

class Maracuja extends Fruta{
	
	public Maracuja(int x, int y, int dimensao, float bichada) {
		super(x,y,dimensao,bichada);
	}
	
	@Override
 	public void efeito() {
		
	};
}

class Abacate extends Fruta{
	
	public Abacate(int x, int y, int dimensao, float bichada) {
		super(x,y,dimensao,bichada);
	}
	
	@Override
 	public void efeito() {
		
	};
}

class Coco extends Fruta{
	
	public Coco(int x, int y, int dimensao, float bichada) {
		super(x,y,dimensao,bichada);
	}
	
	@Override
 	public void efeito() {
		
	};
}

class Laranja extends Fruta{
	
	public Laranja(int x, int y, int dimensao, float bichada) {
		super(x,y,dimensao,bichada);
	}
	
	@Override
 	public void efeito() {
		};
}

class Amora extends Fruta{
	
	public Amora(int x, int y, int dimensao, float bichada) {
		super(x,y,dimensao,bichada);
	}
	
	@Override
 	public void efeito() {
		
	};
}

	

class Goiaba extends Fruta{
	
	public Goiaba(int x, int y, int dimensao, float bichada) {
		super(x,y,dimensao,bichada);
	}
	
	@Override
 	public void efeito() {
		
	};
}

class Acerola extends Fruta{
	
	public Acerola(int x, int y, int dimensao, float bichada) {
		super(x,y,dimensao,bichada);
	}
	
	@Override
 	public void efeito() {
		
	};
}
public class Classes {

	
	
}
