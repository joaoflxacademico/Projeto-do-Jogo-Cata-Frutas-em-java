package cata_frutas.Elementos.Elementos_Dinâmicos;

import cata_frutas.Terreno;
import cata_frutas.Elementos.Elementos_Estáticos.Grama;

import java.util.ArrayList;

public class Mochila {
    public Fruta[] mochila;

    // Construtor inicializa a mochila com o tamanho especificado
    public Mochila(int tamanho) {
        this.mochila = new Fruta[tamanho];
    }

    // Método para retornar uma fruta da mochila
    public Fruta retornaFruta(Fruta fruta) {
        // Verifica se a fruta existe 
        for(int i = 0; i < this.mochila.length;i++) {
        	if (mochila[i] != null && mochila[i].getClass().equals(fruta.getClass())) {
                System.out.printf("Fruta %s retornada.\n", fruta.nome);
                mochila[i] = null;
                return fruta;
            	}
            }
        System.out.printf("Nenhuma Fruta %s disponível na mochila.\n",fruta.nome);
        return null;
    }

    // Método para armazenar uma fruta na mochila
    public void armazenaFruta(Jogador jogador, Terreno terreno) {
    	Grama grama = null;	
    	for(int i = 0; i < terreno.listaGramas.size(); i++) {
    		grama = terreno.listaGramas.get(i);
    		if(grama.getFruta() != null && grama.getJogador() == jogador && grama.getJogador() != terreno.jogadores[terreno.numeroTurno%2]) {
    			break;
    		}
    	}
    	if(grama == null) {
    		System.out.println(("Não existe fruta no espaço do jogador."));
    	}
    	if(!this.mochilaCheia()) {
			for(int j = 0; j < jogador.tamanhoMochila; j++) {
				if(jogador.mochilaJogador.mochila[j] == null) {
					jogador.mochilaJogador.mochila[j] = (Fruta) grama.getFruta();
					System.out.printf("Fruta: %s guardada na mochila do Jogador: %s\n",grama.getFruta().nome, jogador.nome);
					return;
				}
			}
    	}
    	else {
            System.out.println("Mochila cheia! Não é possível armazenar mais frutas.");
        }
    }


    // Exibe todas as frutas armazenadas na mochila
    public void exibirMochila() {
        for (int i = 0; i < this.mochila.length; i++) {
            if (this.mochila[i] != null) {
                System.out.printf("Fruta %d: %s \n", i + 1, this.mochila[i].nome);
            } else {
                System.out.printf("Fruta %d: [vazio]\n", i);
            }
        }
    }

    // Método para verificar se a mochila está cheia
    public boolean mochilaCheia() {
        // Se houver algum espaço vazio (null), a mochila não está cheia
        for (int i = 0; i < this.mochila.length; i++) {
            if (this.mochila[i] == null) {
                return false;
            }
        }
        // Retorna true se todos os espaços estiverem ocupados
        return true;
    }
}
